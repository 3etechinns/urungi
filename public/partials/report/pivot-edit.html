
<nd-modal id="theReportNameModal">
    <!--<div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3></h3>
    </div>-->
    <div class="modal-body">
        <form class="simple-form" role="form" name="reportNameForm">
            <div class="form-group">
                <label>Report Name</label>
                <input name="reportName" type="text" class="form-control" ng-model="selectedReport.reportName" ng-required="true" required >
                <span ng-show="reportNameForm.reportName.$invalid" class="help-inline">The report name is a required field</span>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button ng-click="reportNameSave()" ng-disabled="reportNameForm.$invalid" class="btn btn-primary submit-btn pull-right">Save</button>
        <button type="button" class="btn pull-right" data-dismiss="modal">Cancel</button>
    </div>
</nd-modal>



<nd-modal id="filterPromptsModal">
    <div class="modal-header ng-scope">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-close"></i></button>
        <h4 class="modal-title">Filter properties</h4>
    </div>

    <div class="modal-body ng-scope">

        <div class="row">
            <div class="col-md-6">

                <div class="form-group">
                    <label for="field-3" class="control-label">Prompt Title</label>

                    <input type="text" class="form-control" id="field-3"  ng-model="selectedFilter.promptTitle">
                </div>

            </div>

            <div class="col-md-6">
                <div class="form-group">
                    <label for="field-3" class="control-label"></label>
                    <div class="checkbox popover-primary ng-scope" popover-trigger="mouseenter" popover-placement="top" popover-title="Answer required" popover="Select if you want the user have to enter an answer before executing the report.">
                        <label>
                            <input type="checkbox" ng-model="selectedFilter.promptMandatory">
                            Answer required
                        </label>
                    </div>
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" ng-model="selectedFilter.promptAllowMultipleSelection">
                            Allow Multiple selection
                        </label>
                    </div>
                </div>
            </div>
        </div>


        <div class="row">
            <div class="col-md-12">
                        <div class="form-group no-margin">
                            <label for="field-7" class="control-label">Prompt Instructions</label>
                            <textarea ng-model="selectedFilter.promptInstructions" class="form-control autogrow" id="field-7"  style="overflow: hidden; word-wrap: break-word; resize: horizontal; height: 50px;"></textarea>
                        </div>
            </div>
        </div>

    </div>

    <div class="modal-footer ng-scope">
        <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
        <button ng-show="selectedFilter.filterPrompt == true" type="button" class="btn btn-danger"  ng-click="setFilterPrompt(selectedFilter)">Deactivate prompt</button>
        <button ng-show="selectedFilter.filterPrompt == false" type="button" class="btn btn-info"  ng-click="setFilterPrompt(selectedFilter)">Activate prompt</button>
    </div>
</nd-modal>


<div class="container-fluid" style="padding-bottom: 5px;padding-top: 5px;height: 40px;" ng-init="initForm()">
    <a data-ng-click="reportName()" class="btn btn-success pull-right"  ng-hide="queryID" style="margin-right: 5px">Save Report</a>
    <a data-ng-click="saveQuery()" class="btn btn-success pull-right"  ng-hide="reportID" style="margin-right: 5px">Save Query</a>
    <a ng-click="goBack()" class="btn btn-default pull-right">Cancel</a>
</div>


<div class="container-fluid" ng-hide="queryID">
    <!-- TYPE OF REPORT SELECTION -->

    <a class="btn" ng-class="{'btn-info': selectedReport.reportType == 'grid', 'btn-default': selectedReport.reportType != 'grid'}" ng-click="changeReportType('grid')"><img src="/images/grid.png"></a>
    <a class="btn" ng-class="{'btn-info': selectedReport.reportType == 'chart-bar', 'btn-default': selectedReport.reportType != 'chart-bar'}" ng-click="changeReportType('chart-bar')"><img src="/images/chart_bar.png"></a>
    <a class="btn" ng-class="{'btn-info': selectedReport.reportType == 'chart-area', 'btn-default': selectedReport.reportType != 'chart-area'}" ng-click="changeReportType('chart-area')"><img src="/images/chart_area.png"></a>
    <a class="btn" ng-class="{'btn-info': selectedReport.reportType == 'chart-line', 'btn-default': selectedReport.reportType != 'chart-line'}" ng-click="changeReportType('chart-line')"><img src="/images/chart_line.png"></a>
    <a class="btn" ng-class="{'btn-info': selectedReport.reportType == 'chart-donut', 'btn-default': selectedReport.reportType != 'chart-donut'}" ng-click="changeReportType('chart-donut')"><img src="/images/chart_donut.png"></a>
    <a class="btn" ng-class="{'btn-info': selectedReport.reportType == 'indicator', 'btn-default': selectedReport.reportType != 'indicator'}" ng-click="changeReportType('indicator')"><img src="/images/indicator.png"></a>
    <a class="btn" ng-class="{'btn-info': selectedReport.reportType == 'gauge', 'btn-default': selectedReport.reportType != 'gauge'}" ng-click="changeReportType('gauge')"><img src="/images/gauge.png"></a>

</div>



<div class="container-fluid" style="border-bottom: 2px solid #72A230; padding: 10px;">
     <h3 class="pull-right" >Query design zone</h3>
</div>

<div class="container-fluid" style="padding:10px" >


    <script type="text/ng-template" id="filtersGroup.html">
        <div class="container-fluid filter-zone no-padding" drop="onDrop($data, $event, 'group', group)" drop-effect="copy" drop-accept="'json/custom-object'" drag-over="onDragOver($event)" drag-over-class="drag-over-accept">
            <div class="filter-zone-label pull-right" ng-hide="filters.length > 0">Drop here your filters</div>
            <ul class="ul-drop no-padding" ng-model="group.filters" >

                <div ng-repeat="filter in group.filters">

                    <!--<li class="filter-box" ng-if="!filter.group && !filter.condition" style="margin-left: 90px;"
                        drop="onDropOnFilter($data, $event, filter)" drop-effect="copy" drop-accept="'json/custom-object'">-->
                    <li class="filter-box" ng-if="!filter.group && !filter.condition" style="margin-left: 90px;">
                        <div class="container-fluid">
                            <form role="form" class="form-inline">
                            <div class="dropdown" style="vertical-align: middle">
                                <span style="color:#72A230;font-weight: bold">{{filter.objectLabel}}</span>
                                <button class="btn btn-link dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    <span style="color:#0000FF;">{{filter.filterTypeLabel}}</span>
                                    <span class="caret" style="color:#0000FF;"></span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenu4" >
                                    <li ng-repeat="option in getElementFilterOptions(filter.elementType)"><a ng-click="setFilterType(filter,option)">{{option.label}}</a>

                                    </li>
                                </ul>
                                <!-- Array -->
                                <div class="form-group" ng-show="(filter.values != undefined && filter.elementType == 'array' && (filter.filterType != 'in' && filter.filterType != 'notIn') && (filter.filterType != 'null' && filter.filterType != 'notNull'))">

                                    <ui-select ng-model="filter.filterLabel1" on-select="selectFilterArrayValue('simple', filter)" theme="select2" ng-disabled="disabled" style="width: 200px;">
                                        <ui-select-match placeholder="Select or search a value in the list...">{{$select.selected.label}}</ui-select-match>
                                        <ui-select-choices repeat="value in filter.values | filter: $select.search">
                                            <span ng-bind-html="value.label | highlight: $select.search"></span>
                                            <!--<small ng-bind-html="country.value | highlight: $select.search"></small>-->
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                                <!-- END Array -->
                                <!-- Multiple Array -->
                                <div class="form-group" ng-show="(filter.values != undefined && filter.elementType == 'array' && (filter.filterType == 'in' || filter.filterType == 'notIn') && (filter.filterType != 'null' && filter.filterType != 'notNull') )" >

                                    <ui-select multiple ng-model="filter.filterLabel1" on-select="selectFilterArrayValue('multiple', filter)" on-remove="selectFilterArrayValue('multiple', filter)" theme="select2" ng-disabled="disabled" style="width: 200px;">
                                        <ui-select-match placeholder="Select multiple values...">{{$item.label}}</ui-select-match>
                                        <ui-select-choices repeat="value in filter.values | filter: $select.search">
                                            <div ng-bind-html="value.lavel | highlight: $select.search"></div>
                                            <small>
                                                {{value.label}}

                                            </small>
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                                <!-- END Multiple Array -->

                                <!-- TODO: Selector de fecha , tratamiento de los campos de tipo fecha, mes , año, día, dia de la semana, etc... -->
                                <!-- Date -->
                                <div class="form-group" ng-show="(filter.elementType == 'date' && (filter.filterType != 'null' && filter.filterType != 'notNull'))">
                                    <span ng-show="(filter.elementType == 'date' && (filter.filterType != 'in' && filter.filterType != 'notIn') && (filter.filterType != 'null' && filter.filterType != 'notNull'))">{{filter.filterLabel1 | date:'yyyy-MM-dd'}}</span>
                                    <span ng-show="filter.filterType == 'in' || filter.filterType == 'notIn'">
                                        <span class="filter-in-list" ng-repeat="oneDate in filter.filterText1">
                                            {{oneDate | date:'yyyy-MM-dd'}} <i class="fa fa-remove filter-in-list-remove" ng-click="removeItem(oneDate,filter.filterText1)"></i>
                                        </span>

                                    </span>
                                    <span class="dropdown" popover-trigger="mouseenter" popover-placement="bottom" popover-title="Select date" popover="Click here to select the date to filter">
                                        <a class="btn btn-primary popover-primary ng-scope"  id="dropdown1" role="button" data-toggle="dropdown" data-target="#" ><i class="fa fa-calendar"></i></a>
                                        <ul class="dropdown-menu" role="menu">
                                            <datetimepicker ng-model="filter.filterLabel1"  data-on-set-time="onDateSet(newDate, oldDate, filter)" data-datetimepicker-config="{ dropdownSelector: '#dropdown1', startView:'day', minView:'day'  }"/>
                                        </ul>
                                    </span>

                                    <!--between for date -->
                                    <span ng-if="(filter.filterType == 'between' || filter.filterType == 'notBetween') && filter.elementType == 'date'" style="color:#0000FF;"> and </span>
                                    <span ng-if="(filter.filterType == 'between' || filter.filterType == 'notBetween') && filter.elementType == 'date'"> {{filter.filterLabel2 | date:'yyyy-MM-dd'}} </span>
                                    <span ng-if="(filter.filterType == 'between' || filter.filterType == 'notBetween') && filter.elementType == 'date'" class="dropdown" popover-trigger="mouseenter" popover-placement="bottom" popover-title="Select date" popover="Click here to select the end date to filter">
                                        <a class="btn btn-primary popover-primary ng-scope"  id="dropdown2" role="button" data-toggle="dropdown" data-target="#" ><i class="fa fa-calendar"></i></a>
                                        <ul class="dropdown-menu" role="menu">
                                            <datetimepicker ng-model="filter.filterLabel2"  data-on-set-time="onDateEndSet(newDate, oldDate, filter)" data-datetimepicker-config="{ dropdownSelector: '#dropdown2', startView:'day', minView:'day'  }"/>
                                        </ul>
                                    </span>
                                    <!--end between for date -->



                                    <ui-select ng-show="filter.filterType != 'between' && filter.filterType != 'notBetween' && filter.filterType != 'null' && filter.filterType != 'notNull' && filter.filterType != 'in' && filter.filterType != 'notIn'" ng-model="filter.dateCustomFilterLabel" on-select="filter.filterText1 = filter.dateCustomFilterLabel.value;filter.filterLabel1 = ''" theme="select2" ng-disabled="disabled" style="width: 200px;">
                                        <ui-select-match placeholder="Select or search a value in the list...">{{$select.selected.label}}</ui-select-match>
                                        <ui-select-choices repeat="value in dateFilters | filter: $select.search">
                                            <span ng-bind-html="value.label | highlight: $select.search"></span>
                                            <!--<small ng-bind-html="country.value | highlight: $select.search"></small>-->
                                        </ui-select-choices>
                                    </ui-select>





                                </div>
                                <!-- END Date -->


                                <div class="input-group" ng-show="!(filter.filterType == 'null' || filter.filterType == 'notNull') && (filter.filterPrompt == false) && ( filter.elementType != 'array') && ( filter.elementType != 'date')" style="width:200px;">
                                    <input type="text" class="form-control no-right-border form-focus-green" ng-model="filter.filterText1" >
                                    <!--TODO: para el in -not in como select2, pero con los valores introducidos manualmente ver ejemplo en: http://stackoverflow.com/questions/29489821/allow-manually-entered-text-in-ui-select-->
                                    <!--<select multiple="" data-role="tagsinput" style="display: none;"/>  http://timschlechter.github.io/bootstrap-tagsinput/examples/bootstrap-2.3.2.html-->


                                    <span class="input-group-btn">

                                        <button class="btn btn-primary popover-primary ng-scope" popover-trigger="mouseenter" popover-placement="bottom" popover-title="Select distinct values" popover="Click here to select one or more from the distinct values that can currently be found in the database" ng-click="getDistinctValues(filter)"><i class="fa fa-search"></i></button>
                                    </span>
                                </div>
                                <div class="form-group">
                                    <button class="btn popover-primary ng-scope" ng-class="{'btn-info': filter.filterPrompt == true, 'btn-white': filter.filterPrompt == false}" ng-click="filterPromptsClick(filter)" popover-trigger="mouseenter" popover-placement="top" popover-title="Filter prompt" popover="{{getButtonFilterPromptMessage(filter)}}">
                                        <i class="fa fa-question-circle"></i>
                                    </button>
                                </div>
                                <!--
                                <div class="form-group">
                                    <button class="btn btn-white popover-primary ng-scope" ng-click="filterPropertiesClick(filter)" popover-trigger="mouseenter" popover-placement="top" popover-title="Filter properties" popover="Click here to access the advanced properties for this filter">
                                        <i class="fa fa-gear"></i>
                                    </button>
                                </div>
                                -->
                                <span ng-show="(filter.filterType == 'between' || filter.filterType == 'notBetween') && filter.elementType != 'date'"> and <input type="text" ng-model="filter.filterText2" />  </span>
                                <span class="pull-right" style="padding: 7px 0;"><i class="fa fa-times hand-cursor" ng-click="removeFromArray(group.filters, filter);filtersUpdated();detectLayerJoins();processStructure();"></i></span>
                            </div>
                            </form>
                        </div>

                    </li>

                    <li ng-if="filter.condition">

                        <div class="dropdown" style="position: absolute; margin: -17px 0px 0px 0px; width: 90px; text-align: center;">
                            <button class="btn btn-link dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                <span style="color:#0000FF;" ng-bind="filter.conditionLabel"></span>
                                <span class="caret" style="color:#0000FF;"></span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenu4" >
                                <li ng-repeat="condition in conditionTypes"><a ng-click="updateCondition(filter, condition)" ng-bind="condition.conditionLabel"></a></li>
                            </ul>
                        </div>

                    </li>

                    <li ng-if="filter.group" style="margin-left: 85px;">

                        <div ng-init="group=filter" ng-include="'filtersGroup.html'"></div>

                    </li>

                </div>

            </ul>
            <div ng-show="filters.length > 0" style="text-align: center;font-size: 15px;font-weight: bold;padding-bottom: 10px;">Drop new filters here</div>
        </div>
    </script>

    <div ng-repeat="group in filters" ng-include="'filtersGroup.html'"></div>

    <div ng-show="selectedReport.reportType != 'indicator' && selectedReport.reportType != 'gauge'" class="container-fluid column-zone no-padding" drop="onDrop($data, $event, 'order')" drop-effect="copy" drop-accept="['json/custom-object','json/column']" drag-over="onDragOver($event)" drag-over-class="drag-over-accept">
        <div class="filter-zone-label pull-right" ng-hide="order.length > 0">Drop here order by elements</div>
        <!--<div class="column-box" draggable="true" effect-allowed="move" draggable-type="column" draggable-data="{objectLabel: '{{dim.objectLabel}}',objectID: '123456'}">campo1</div>
        <div class="column-box" draggable="true" effect-allowed="move" draggable-type="column" draggable-data="{objectLabel: '{{dim.objectLabel}}',objectID: '123456'}">campo 2</div>
        drop="onDrop($data, $event, 'column')" drop-effect="copy" drop-accept="['json/custom-object','json/column']" drag-over="onDragOver($event)" drag-over-class="drag-over-accept"
        -->
        <ul class="ul-drop no-padding" ng-model="order" ui-sortable="sortableOptions">
            <li class="column-box" ng-repeat="field in order">
                <i class="fa fa-cube" ng-show="field.elementType != 'number' && field.elementType != 'count'"></i>
                <i class="fa fa-list-ol" ng-show="field.elementType == 'number' || field.elementType == 'count'"></i>
                {{field.objectLabel}}
                <i ng-show="field.sortType == -1" class="fa fa-chevron-down hand-cursor" ng-click="field.sortType = 1;processStructure();"></i>
                <i ng-show="field.sortType == 1" class="fa fa-chevron-up hand-cursor" ng-click="field.sortType = -1;processStructure();"></i>
                <i class="fa fa-times hand-cursor" ng-click="removeFromArray(order, field);detectLayerJoins();processStructure();"></i>
            </li>
        </ul>
    </div>

    <div ng-show="selectedReport.reportType == 'grid' "class="container-fluid column-zone no-padding" drop="onDrop($data, $event, 'column')" drop-effect="copy" drop-accept="['json/custom-object','json/column']" drag-over="onDragOver($event)" drag-over-class="drag-over-accept">
        <div class="filter-zone-label pull-right" ng-hide="columns.length > 0">Drop here your columns</div>
        <ul class="ul-drop no-padding" ng-model="columns" ui-sortable="sortableOptions">
            <li class="column-box" ng-repeat="column in columns">

                <div class="dropdown">
                    <i class="fa fa-cube" ng-show="column.elementType != 'number' && column.elementType != 'count'"></i>
                    <i class="fa fa-list-ol" ng-show="column.elementType == 'number' || column.elementType == 'count'"></i>
                    {{column.objectLabel}}
                    <button class="btn btn-link dropdown-toggle" type="button" style="padding: 0px;"
                            id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        <span style="color:#0000FF;">{{column.variableLabel}}</span>
                        <i ng-show="column.elementType == 'string'" class="caret" style="color:#0000FF;"></i>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenu4" >
                        <li ng-repeat="variable in stringVariables">
                            <a ng-click="column.variable = variable.value;column.variableLabel = variable.label;processStructure();">{{variable.label}}</a>
                        </li>
                    </ul>
                    <button class="btn " ng-class="{'btn-info': column.link, 'btn-dark': !column.link}" ng-click="setLinkForColumn(column)"><i class="fa fa-link"></i></button>
                    <i class="fa fa-times hand-cursor" ng-click="remove(column,'column');processStructure();"></i>
                </div>

            </li>
        </ul>
        <span ng-show="columns.length > 0" class="pull-right" style="padding: 3px 10px;"><i class="fa fa-refresh hand-cursor" ng-click="processStructure();"></i></span>
    </div>
    <!--xkey for charts -->
    <div ng-show="selectedReport.reportType == 'chart-bar' || selectedReport.reportType == 'chart-area' || selectedReport.reportType == 'chart-line' || selectedReport.reportType == 'chart-donut' " class="container-fluid column-zone no-padding" drop="onDrop($data, $event, 'xkey')" drop-effect="copy" drop-accept="['json/custom-object','json/column']" drag-over="onDragOver($event)" drag-over-class="drag-over-accept">
        <div class="filter-zone-label pull-right" ng-hide="selectedReport.properties.xkeys.length > 0">Drop here the x key field</div>
        <ul class="ul-drop no-padding" ng-model="selectedReport.properties.xkeys" ui-sortable="sortableOptions">
            <li class="column-box" ng-repeat="xkey in selectedReport.properties.xkeys">
                <div class="dropdown">
                    <i class="fa fa-cube" ng-show="xkey.elementType != 'number' && xkey.elementType != 'count'"></i>
                    <i class="fa fa-list-ol" ng-show="xkey.elementType == 'number' || xkey.elementType == 'count'"></i>
                    {{xkey.objectLabel}}
                    <!--
                    <button class="btn btn-link dropdown-toggle" type="button" style="padding: 0px;"
                            id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        <span style="color:#0000FF;">{{column.variableLabel}}</span>
                        <i ng-show="column.elementType == 'string'" class="caret" style="color:#0000FF;"></i>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenu4" >
                        <li ng-repeat="variable in stringVariables">
                            <a ng-click="column.variable = variable.value;column.variableLabel = variable.label;processStructure();">{{variable.label}}</a>
                        </li>
                    </ul>
                    -->
                    <i class="fa fa-times hand-cursor" ng-click="remove(xkey,'xkey');processStructure();"></i>
                </div>

            </li>
        </ul>
    </div>
    <!--ykey for charts -->
    <div ng-show="selectedReport.reportType == 'chart-bar' || selectedReport.reportType == 'chart-area' || selectedReport.reportType == 'chart-line' || selectedReport.reportType == 'chart-donut' || selectedReport.reportType == 'indicator' || selectedReport.reportType == 'gauge'" class="container-fluid column-zone no-padding" drop="onDrop($data, $event, 'ykey')" drop-effect="copy" drop-accept="['json/custom-object','json/column']" drag-over="onDragOver($event)" drag-over-class="drag-over-accept">
        <div class="filter-zone-label pull-right" ng-hide="selectedReport.properties.ykeys.length > 0">Drop here your value fields</div>
        <ul class="ul-drop no-padding" ng-model="selectedReport.properties.ykeys" ui-sortable="sortableOptions">
            <li class="column-box" ng-repeat="ykey in selectedReport.properties.ykeys">
                <div class="dropdown">
                    <i class="fa fa-cube" ng-show="ykey.elementType != 'number' && ykey.elementType != 'count'"></i>
                    <i class="fa fa-list-ol" ng-show="ykey.elementType == 'number' || ykey.elementType == 'count'"></i>
                    {{ykey.objectLabel}}
                    <i class="fa fa-times hand-cursor" ng-click="remove(ykey,'ykey');processStructure();"></i>
                </div>

            </li>
        </ul>
        <div class="dropAlert" ng-show="onlyNumericValuesAlert == true"> <i class="fa fa-exclamation-triangle"></i> Only numeric values are allowed here !</div>
    </div>

    <!-- INDICATOR -->
    <!--
    valueType (curreny|percentage)
    currencySymbol
    backgroundColor
    fontColor
    auxFontColor
    type (style1|style2|style3)
    valueText
    valueIcon
    -->
    <div ng-show="selectedReport.reportType == 'indicator'">
        <div class="col-md-6">
            <div class="container-fluid">
                <!-- TYPE OF REPORT SELECTION -->

                <a class="btn" ng-class="{'btn-info': selectedReport.properties.style == 'style1', 'btn-default': selectedReport.properties.style != 'style1'}" ng-click="changeReportStyle('style1')"><img src="/images/indicator.png"></a>
                <a class="btn" ng-class="{'btn-info': selectedReport.properties.style == 'style2', 'btn-default': selectedReport.properties.style != 'style2'}" ng-click="changeReportStyle('style2')"><img src="/images/indicator2.png"></a>
                <a class="btn" ng-class="{'btn-info': selectedReport.properties.style == 'style3', 'btn-default': selectedReport.properties.style != 'style3'}" ng-click="changeReportStyle('style3')"><img src="/images/indicator3.png"></a>
            </div>
            <!--<textarea class="form-control" ng-model="selectedReport.properties.valueText"> </textarea>-->
            <input class="form-control" type="text"  ng-model="selectedReport.properties.valueText"/>
            <div class="btn-group">
                <button type="button" class="btn btn-primary iconpicker-component"><i class="fa {{selectedReport.properties.reportIcon}}" ></i></button>
                <button type="button" class="icp icp-dd btn btn-primary dropdown-toggle iconpicker-element" data-selected="fa-car" data-toggle="dropdown">
                    <span class="caret"></span>
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
                <div class="dropdown-menu iconpicker-container"><div class="iconpicker-popover popover fade in inline" style="top: auto; right: auto; bottom: auto; left: auto; max-width: none;"><div class="arrow"></div><div class="popover-content"><div class="iconpicker">
                    <div class="iconpicker-items">
                        <a role="button" ng-click="changeReportIcon(icon.value)" class="iconpicker-item" title=".{{icon.value}}" ng-repeat="icon in faList"><i class="fa {{icon.value}}"></i></a>



                </div></div></div></div></div>
            </div>

            <div class="btn-group">
                <button type="button" class="btn btn-primary iconpicker-component" style="height:32px; background-color: {{selectedReport.properties.backgroundColor}}" ng-style="{color: (selectedReport.properties.backgroundColor == '#FFFFFF') ? '#000000' : '#FFFFFF'}">Background Color</button>
                <button type="button" class="icp icp-dd btn btn-primary dropdown-toggle iconpicker-element" data-selected="fa-car" data-toggle="dropdown" style="height:32px; background-color: {{selectedReport.properties.backgroundColor}}" ng-style="{color: (selectedReport.properties.backgroundColor == '#FFFFFF') ? '#000000' : '#FFFFFF'}">
                    <span class="caret"></span>
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
                <div class="dropdown-menu iconpicker-container"><div class="iconpicker-popover popover fade in inline" style="top: auto; right: auto; bottom: auto; left: auto; max-width: none;"><div class="arrow"></div><div class="popover-content"><div class="iconpicker">
                    <div class="iconpicker-items">
                        <a role="button" ng-click="changeReportBackgroundColor(color)" class="iconpicker-item" ng-repeat="color in colors" style="background-color: {{color}}"></a>
                    </div></div></div></div></div>
            </div>

            <div class="btn-group">
                <button type="button" class="btn btn-primary iconpicker-component" style="height:32px; background-color: {{selectedReport.properties.mainFontColor}}" ng-style="{color: (selectedReport.properties.mainFontColor == '#FFFFFF') ? '#000000' : '#FFFFFF'}">Main Font Color</button>
                <button type="button" class="icp icp-dd btn btn-primary dropdown-toggle iconpicker-element" data-selected="fa-car" data-toggle="dropdown" style="height:32px; background-color: {{selectedReport.properties.mainFontColor}}" ng-style="{color: (selectedReport.properties.mainFontColor == '#FFFFFF') ? '#000000' : '#FFFFFF'}">
                    <span class="caret"></span>
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
                <div class="dropdown-menu iconpicker-container"><div class="iconpicker-popover popover fade in inline" style="top: auto; right: auto; bottom: auto; left: auto; max-width: none;"><div class="arrow"></div><div class="popover-content"><div class="iconpicker">
                    <div class="iconpicker-items">
                        <a role="button" ng-click="changeReportMainFontColor(color)" class="iconpicker-item" ng-repeat="color in colors" style="background-color: {{color}}"></a>
                    </div></div></div></div></div>
            </div>

            <div class="btn-group">
                <button type="button" class="btn btn-primary iconpicker-component" style="height:32px; background-color: {{selectedReport.properties.descFontColor}}" ng-style="{color: (selectedReport.properties.descFontColor == '#FFFFFF') ? '#000000' : '#FFFFFF'}">Aux Font Color</button>
                <button type="button" class="icp icp-dd btn btn-primary dropdown-toggle iconpicker-element" data-selected="fa-car" data-toggle="dropdown" style="height:32px; background-color: {{selectedReport.properties.descFontColor}}" ng-style="{color: (selectedReport.properties.descFontColor == '#FFFFFF') ? '#000000' : '#FFFFFF'}">
                    <span class="caret"></span>
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
                <div class="dropdown-menu iconpicker-container"><div class="iconpicker-popover popover fade in inline" style="top: auto; right: auto; bottom: auto; left: auto; max-width: none;"><div class="arrow"></div><div class="popover-content"><div class="iconpicker">
                    <div class="iconpicker-items">
                        <a role="button" ng-click="changeReportDescFontColor(color)" class="iconpicker-item" ng-repeat="color in colors" style="background-color: {{color}}"></a>
                    </div></div></div></div></div>
            </div>

        </div>
        <div class="col-md-6">

        </div>
    </div>

    <div ng-show="selectedReport.reportType == 'gauge'">
        <div class="col-md-6"  >
            <div class="panel panel-default" style="height: 100%">

                <div class="panel-heading">
                    <div class="panel-title" style="width: 100%">
                        Settings
                        <div class="pull-right">
                        <a class="btn btn-info" ng-click="processStructure()">Apply</a>
                        </div>
                    </div>
                </div>

                <div class="panel-body">
                    <h5>Angle</h5>
                    <slider ng-model="selectedReport.properties.angle" min="0" step="1" max="50"  data-slider-id="RC1" id="R" data-slider-tooltip="show" handle="square"></slider>
                    <h5>Line width</h5>
                    <slider ng-model="selectedReport.properties.lineWidth" min="0" step="1" max="70"  data-slider-id="RC2" id="s" data-slider-tooltip="show" handle="square"></slider>
                    <h5>Pointer length</h5>
                    <slider ng-model="selectedReport.properties.pointerLength" min="25" step="1" max="100"  data-slider-id="RC3" id="t" data-slider-tooltip="show" handle="square"></slider>
                    <div class="container-fluid">
                        <div class="col-md-6">
                            <h5>Min value</h5>
                            <input ng-model="selectedReport.properties.minValue" type="text" class="form-control" id="field-1" placeholder="Placeholder">
                        </div>
                        <div class="col-md-6">
                            <h5>Max value</h5>
                            <input ng-model="selectedReport.properties.maxValue" type="text" class="form-control" id="field-1" placeholder="Placeholder">
                        </div>
                    </div>
                    <!--
                    <h5>Basic Spinner</h5>
                    <div class="input-group spinner" data-step="1" min="1">
                                                <span class="input-group-btn">
                                                    <button class="btn btn-gray" data-type="decrement">-</button>
                                                </span>
                        <input type="text" class="form-control text-center" value="1">
                                                <span class="input-group-btn">
                                                    <button class="btn btn-gray" data-type="increment">+</button>
                                                </span>
                    </div> -->
                </div>

            </div>
        </div>
        <div class="col-md-6"  >
            <div class="panel panel-default"  style="height: 100%">

                <div class="panel-heading">
                    <div class="panel-title" style="width: 100%">
                        Colors
                        <div class="pull-right">
                            <a class="btn btn-info" ng-click="processStructure()">Apply</a>
                        </div>
                    </div>
                </div>

                <div class="panel-body">
                    <h5>Pointer color</h5>
                    <div class="btn-group">
                        <button type="button" class="btn btn-primary iconpicker-component" style="height:32px; background-color: {{selectedReport.properties.pointerColor}}" ng-style="{color: (selectedReport.properties.pointerColor == '#FFFFFF') ? '#000000' : '#FFFFFF'}">Pointer Color</button>
                        <button type="button" class="icp icp-dd btn btn-primary dropdown-toggle iconpicker-element" data-selected="fa-car" data-toggle="dropdown" style="height:32px; background-color: {{selectedReport.properties.pointerColor}}" ng-style="{color: (selectedReport.properties.pointerColor == '#FFFFFF') ? '#000000' : '#FFFFFF'}">
                            <span class="caret"></span>
                            <span class="sr-only">Toggle Dropdown</span>
                        </button>
                        <div class="dropdown-menu iconpicker-container"><div class="iconpicker-popover popover fade in inline" style="top: auto; right: auto; bottom: auto; left: auto; max-width: none;"><div class="arrow"></div><div class="popover-content"><div class="iconpicker">
                            <div class="iconpicker-items">
                                <a role="button" ng-click="selectedReport.properties.pointerColor = color" class="iconpicker-item" ng-repeat="color in colors" style="background-color: {{color}}"></a>
                            </div></div></div></div></div>
                    </div>
                    <h5>Color start</h5>
                    <div class="btn-group">
                        <button type="button" class="btn btn-primary iconpicker-component" style="height:32px; background-color: {{selectedReport.properties.colorStart}}" ng-style="{color: (selectedReport.properties.colorStart == '#FFFFFF') ? '#000000' : '#FFFFFF'}">Start Color</button>
                        <button type="button" class="icp icp-dd btn btn-primary dropdown-toggle iconpicker-element" data-selected="fa-car" data-toggle="dropdown" style="height:32px; background-color: {{selectedReport.properties.colorStart}}" ng-style="{color: (selectedReport.properties.colorStart == '#FFFFFF') ? '#000000' : '#FFFFFF'}">
                            <span class="caret"></span>
                            <span class="sr-only">Toggle Dropdown</span>
                        </button>
                        <div class="dropdown-menu iconpicker-container"><div class="iconpicker-popover popover fade in inline" style="top: auto; right: auto; bottom: auto; left: auto; max-width: none;"><div class="arrow"></div><div class="popover-content"><div class="iconpicker">
                            <div class="iconpicker-items">
                                <a role="button" ng-click="selectedReport.properties.colorStart = color" class="iconpicker-item" ng-repeat="color in colors" style="background-color: {{color}}"></a>
                            </div></div></div></div></div>
                    </div>
                    <h5>Color end</h5>
                    <div class="btn-group">
                        <button type="button" class="btn btn-primary iconpicker-component" style="height:32px; background-color: {{selectedReport.properties.colorStop}}" ng-style="{color: (selectedReport.properties.colorStop == '#FFFFFF') ? '#000000' : '#FFFFFF'}">Stop Color</button>
                        <button type="button" class="icp icp-dd btn btn-primary dropdown-toggle iconpicker-element" data-selected="fa-car" data-toggle="dropdown" style="height:32px; background-color: {{selectedReport.properties.colorStop}}" ng-style="{color: (selectedReport.properties.colorStop == '#FFFFFF') ? '#000000' : '#FFFFFF'}">
                            <span class="caret"></span>
                            <span class="sr-only">Toggle Dropdown</span>
                        </button>
                        <div class="dropdown-menu iconpicker-container"><div class="iconpicker-popover popover fade in inline" style="top: auto; right: auto; bottom: auto; left: auto; max-width: none;"><div class="arrow"></div><div class="popover-content"><div class="iconpicker">
                            <div class="iconpicker-items">
                                <a role="button" ng-click="selectedReport.properties.colorStop = color" class="iconpicker-item" ng-repeat="color in colors" style="background-color: {{color}}"></a>
                            </div></div></div></div></div>
                    </div>
                    <h5>Background color</h5>
                    <div class="btn-group">
                        <button type="button" class="btn btn-primary iconpicker-component" style="height:32px; background-color: {{selectedReport.properties.strokeColor}}" ng-style="{color: (selectedReport.properties.strokeColor == '#FFFFFF') ? '#000000' : '#FFFFFF'}">Background Color</button>
                        <button type="button" class="icp icp-dd btn btn-primary dropdown-toggle iconpicker-element" data-selected="fa-car" data-toggle="dropdown" style="height:32px; background-color: {{selectedReport.properties.strokeColor}}" ng-style="{color: (selectedReport.properties.strokeColor == '#FFFFFF') ? '#000000' : '#FFFFFF'}">
                            <span class="caret"></span>
                            <span class="sr-only">Toggle Dropdown</span>
                        </button>
                        <div class="dropdown-menu iconpicker-container"><div class="iconpicker-popover popover fade in inline" style="top: auto; right: auto; bottom: auto; left: auto; max-width: none;"><div class="arrow"></div><div class="popover-content"><div class="iconpicker">
                            <div class="iconpicker-items">
                                <a role="button" ng-click="selectedReport.properties.strokeColor = color" class="iconpicker-item" ng-repeat="color in colors" style="background-color: {{color}}"></a>
                            </div></div></div></div></div>
                    </div>
                </div>

            </div>
        </div>
    </div>

</div>

<div class="container-fluid" >

    <div id="reportLayout" class="panel panel-default">



    </div>
    <!--
    <div class="table-responsive">
        <table class="table table-bordered">
            <thead>
                 <td ng-repeat="column in columns" ><strong>{{column.objectLabel}}</strong></td>
            </thead>
            <tbody>
            <tr ng-repeat="row in previewData" >
                <td ng-repeat="column in columns" >
                    <span ng-if="!column.aggregation">{{row[column.elementName]}}</span>
                    <span ng-if="column.aggregation">{{row[column.elementName+column.aggregation]}}</span>
                </td>
            </tr>

            </tbody>
        </table>
    </div>
    -->
</div>

<div ng-include src="searchModal"></div>
<div ng-include src="dateModal"></div>
<div ng-include src="dateFromToModal"></div>
<div ng-include src="linkModal"></div>
<div ng-include src="columnFormatModal"></div>
<div ng-include src="columnSignalsModal"></div>
