<link rel="stylesheet" type="text/css" href="libs/pivot/pivot.css">
<script type="text/javascript" src="libs/d3/d3.v3.min.js"></script>

<script type="text/javascript" src="libs/pivot/pivot.js"></script>
<script type="text/javascript" src="libs/pivot/gchart_renderers.js"></script>
<script type="text/javascript" src="libs/pivot/d3_renderers.js"></script>
<script type="text/javascript" src="libs/jquery/jquery.ui.touch-punch.min.js"></script>

<style>
    * {font-family: Verdana;}
    .node {
        border: solid 1px white;
        font: 10px sans-serif;
        line-height: 12px;
        overflow: hidden;
        position: absolute;
        text-indent: 2px;
    }
</style>

<div  ng-init="refreshPivot()">
    <p>
        Drop the fields in the boxes to structure your report:
        <span id="pivot-renderer">

        </span>
    </p>

    <!--<table class="table edit-pivot-grid">


        <tr class="first-row">
            <td class="no-drop-square"></td>
            <td id="columnObjects" class="column-objects" data-drop="true" ng-model='columns' jqyoui-droppable="{multiple:true}">columns
                <ul>
                    <li ng-repeat="item in columns track by $index"  data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}"
                        ng-model="columns" jqyoui-draggable="{index: {{$index}},animate:true, onDrop: onDrop()}">{{ item.label }}</li>
                </ul>
            </td>
        </tr>
        <tr class="second-row">

            <td id="rowObjects" class="row-objects" data-drop="true" ng-model='rows' jqyoui-droppable="{multiple:true}">rows
                <ul>
                    <li ng-repeat="item in rows track by $index"  data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}"
                        ng-model="rows" jqyoui-draggable="{index: {{$index}},animate:true, onDrop: onDrop()}">{{ item.label }}</li>
                </ul>
            </td>
            <td id="metricObjects" class="metric-objects" data-drop="true" ng-model='metrics' jqyoui-droppable="{multiple:true}">metrics
                <ul>
                    <li ng-repeat="item in metrics track by $index"  data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}"
                        ng-model="metrics" jqyoui-draggable="{index: {{$index}},animate:true, onDrop: onDrop()}">{{ item.label }}</li>
                </ul>
            </td>
        </tr>
    </table>-->

    <!--<table class="table edit-pivot-grid">


        <tr class="first-row">
            <td class="no-drop-square"></td>
            <td id="columnObjects" class="column-objects" x-lvl-drop-target="true" x-on-drop='dropped(dragEl, dropEl)'>columns
                <ul>
                    <li ng-repeat="item in columns track by $index"
                        ng-model="columns">{{ item }}</li>
                </ul>
            </td>
        </tr>
        <tr class="second-row">

            <td id="rowObjects" class="row-objects" x-lvl-drop-target="true" x-on-drop='dropped(dragEl, dropEl)'>rows
                <ul>
                    <li ng-repeat="item in rows track by $index"
                        ng-model="rows">{{ item }}</li>
                </ul>
            </td>
            <td id="metricObjects" class="metric-objects" x-lvl-drop-target="true" x-on-drop='dropped(dragEl, dropEl)'>metrics
                <ul>
                    <li ng-repeat="item in metrics track by $index"
                        ng-model="metrics">{{ item }}</li>
                </ul>
            </td>
        </tr>
    </table>-->


    <!--<div id="pivotDesigner" style="margin: 30px;" class="ng-scope">
        <table cellpadding="5">
            <tbody>
            <tr>
                <td class="pvtVals"></td>
                <td id="columnObjects" class="pvtAxisContainer pvtHorizList pvtCols ui-sortable" x-lvl-drop-target="true" x-on-drop='dropped(dragEl, dropEl)' style="height: 50px;min-width: 200px;">
                    <li ng-repeat="item in columns track by $index"><span class="pvtAttr">{{ item }}</span></li>
                </td>
            </tr>
            <tr>
                <td id="rowObjects" class="pvtAxisContainer pvtRows ui-sortable" valign="top" x-lvl-drop-target="true" x-on-drop='dropped(dragEl, dropEl)' style="min-height: 50px;min-width: 200px;">
                    <li ng-repeat="item in rows track by $index"><span class="pvtAttr">{{ item }}</span></li>
                </td>
                <td valign="top" class="pvtRendererArea" style="opacity: 1;">

                </td>
            </tr>
            </tbody>
        </table>
    </div>-->

   <!-- <table class="table edit-pivot-grid">


             <tr class="first-row">
                 <td class="no-drop-square"></td>
                 <td  id="columnObjects" class="column-objects" x-lvl-drop-target="true" x-on-drop='dropped(dragEl, dropEl)'>columns
                     <ul ui-sortable="sortableOptions" >
                         <li ng-repeat="item in columns">{{ item }}</li>
                     </ul>
                 </td>
             </tr>
             <tr class="second-row">

                 <td  id="rowObjects" class="row-objects" x-lvl-drop-target="true" x-on-drop='dropped(dragEl, dropEl)'>rows
                     <ul ui-sortable="sortableOptions" >
                         <li ng-repeat="item in rows">{{ item }}</li>
                     </ul>
                 </td>
                 <td  id="metricObjects" class="metric-objects" x-lvl-drop-target="true" x-on-drop='dropped(dragEl, dropEl)'>metrics
                     <ul ui-sortable >
                         <li ng-repeat="item in metrics">{{ item }}</li>
                     </ul>
                 </td>
             </tr>
    </table>-->

</div>

        <style>
            .pvtUnused, td.pvtAxisContainer li i, .pvtAggregator, .pvtAttrDropdown {
                display: none;
            }
            .pvtRows {
                min-width: 270px;
            }
            .pvtMetricsContainer {
                border: 1px solid #ddd;
            }
            .pvtMetricsContainer, .pvtVals {
                padding: 5px;
                min-width: 20px;
                min-height: 20px;
            }
            td.pvtMetricsContainer li span.pvtAttr {
                background-color: #F0F0F0;
                border: 1px solid #ddd;
                padding: 5px 5px;
                white-space: nowrap;
                -webkit-border-radius: 5px;
                -moz-border-radius: 5px;
                border-radius: 5px;
                display: inline-block;
                height: 34px;
                vertical-align: middle;
                margin-right: 5px;
                margin-bottom: 5px;
            }
        </style>

<div id="pivotOutput"></div>

<h3>Data to Save</h3>

<textarea id="json-data-preview" ng-model="jsonDataPreview" style="width: 100%;height: 200px;"></textarea>

<h3>Read Only PivotTable Province - Gender</h3>

<div id="pivotOutputReadOnly"></div>

<table>
    <tr id="metrics-row">
        <td class="pvtRows"><br></td>
        <td id="metricObjects" class="pvtMetricsContainer pvtHorizList" x-lvl-drop-target="true" x-on-drop='dropped(dragEl, dropEl)'>

            <li ng-repeat="item in metrics">
                <span class="pvtAttr">{{ item }}</span>
            </li>

        </td>
    </tr>
</table>